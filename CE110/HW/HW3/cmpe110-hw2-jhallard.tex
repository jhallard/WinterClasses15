\documentclass[a4paper,11pt]{article}
\usepackage{amsmath}
\usepackage{wrapfig}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{url}
\usepackage{float}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{pdflscape}
\usepackage{afterpage}
\usepackage[margin=0.6in]{geometry}

% \setlength{\voffset}{-0.5in}
\setlength{\headsep}{7pt}
\newcommand{\suchthat}{\;\ifnum\currentgrouptype=16 \middle\fi|\;}
\newcommand{\answer}{\textbf{Answer : }}
\newcommand{\T}{\texttt}
\newcommand{\benu}{\begin{enumerate}}
\newcommand{\enu}{\end{enumerate}}


%===========---------================
% Author John H Allard
% CMPE 110, HW #2
% December 10th, 2014
%===========---------================

\begin{document}
    % \vspace*{\stretch{-0.5}}
   \begin{center}
      \Large\textbf{CMPE 110 Homework \#3}\\
      \large\texttt{John Allard} \\
      \small\texttt{February 23nd, 2015} \\
      \small\texttt{jhallard@ucsc.edu}
   \end{center}
   % \vspace*{\stretch{-0.5}}


\benu

%==============================%
% ======== PROBLEM #1 ======== %
%==============================%
\item \textbf{Question \#1 - Basic Cache} \\

  Consider a 512-KByte cache with 32 word cache lines.This cache uses write-back scheme, and the address is 32 bits wide. (The three tables for parts A, B, and C have been condensed into a single table found below part C).

\benu
% ======= Question 1.A ======= %
\item \textbf{Question 1.A Direct-Mapped, Cache fields}
Assume the cache is direct mapped. Fill in the table below to specify the size of each address field.

\textbf{Explanation} - For a direct-mapped cache, we need to have a 5-bit offset because each cache-line is 32bytes wide. Since our cache is 52-KByte large, and each line is 32 words,  we have 16,384 cache lines. The amount of bits needed to address this amount of cache-lines is 14 ($2^{14} = 16,384$). This leaves 13 bits for the tag.

% ======== Question 1.B ======= %
\item \textbf{Question 1.B Fully Associative Cache Fields} \\
Assume the cache is fully associative,  fill in the table below to specify the size of each address field. \\


\textbf{Explanation} - For a fully-associative cache, we still need 5 bits for the offset, which determines which of the 32 bytes in a cache-line our data is stored at. Since fully-associative caches do not use an index, this leaves 27 bits left for the tag. 

% ======= Question 1.C ========= %

\item \textbf{Question 1.C 8-Way Set-Associative, Cache Fields} \\
Assume the cache is 8-way associative, fill in the table below to specify the size of each address field. \\

\textbf{Explanation} - Once again, we need 5 bits for the offset because each cache-line is 32-bits wide. With 512Kbyte of memory and an 8-way set-associative cache, we will need 11 bits to state which set we are looking for ($2^{11} =16,384/8$). Finally we have 16 bits left to form the tag.

\begin{table}[H]
\caption{Q 1A, 1B, and 1C Calculations} \label{tab:q1calc} 
\begin{center}
\begin{tabular}{| l | l | l | l |} \hline 
   Field              &  Size (1A) & Size (1B) & Size (1C)     \\ \hline
   Cache line offset  &  5         &   5       &   5           \\ \hline
   Cache line index   &  14        &   0       &   11          \\ \hline
   Tag                &  13        &   27      &   16          \\ \hline
\end{tabular}
\end{center}
\end{table}



% ======= Question 1.D ========= %
\item \textbf{Question 1.D Direct Mapped Cache Transactions } \\

Assume the cache is direct-mapped. Fill in the table on the next page to identify the content of the cache after each of the following memory accesses. Assume the cache is initially empty (aka cold). Specify if an entry causes another line to be replaced from the cache, and if an entry has to write its data back to memory. For the data column, specify the data in the block by referring to its address like M[address]


\begin{table}[H]
\caption{Q1D Calculations} \label{tab:q1calc} 
\begin{center}
\begin{tabular}{| l | l | l | l | l | l | l | l | l |}
\hline
Address  &  Request  & Cacheline Ind & Valid & Modified & Tag & Data & Caused Replace & Write-back?    \\ \hline
\T{0x128}  &  \T{read} & \T{  } & \T{} & \T{} & \T{} & \T{} & \T{} & \T{}    \\ \hline
\T{0xF40}  &  \T{read} & \T{  } & \T{} & \T{} & \T{} & \T{} & \T{} & \T{}    \\ \hline
\T{0xC00024}  &  \T{read} & \T{  } & \T{} & \T{} & \T{} & \T{} & \T{} & \T{}    \\ \hline
\T{0x014}  &  \T{read} & \T{  } & \T{} & \T{} & \T{} & \T{} & \T{} & \T{}    \\ \hline
\T{0x100F44}  &  \T{read} & \T{  } & \T{} & \T{} & \T{} & \T{} & \T{} & \T{}    \\ \hline
\end{tabular}
\end{center}
\end{table}

\textbf{Explanation} - 

\enu


%==============================%
% ======== PROBLEM #2 ======== %
%==============================%

\item \textbf{Question \#2 -} \\

\benu

% ======= Question 2.A ======= %
\item \textbf{Question 2.A}


% ======= Question 2.B ======= %
\item \textbf{Question 2.B}
  
\enu % end problem #2 sub-problems



%==============================%
% ======== PROBLEM #3 ======== %
%==============================%
\item  \textbf{Question \#3 : CPI Changes}  
  
\benu

\item
\enu



%==============================%
% ======== PROBLEM #4 ======== %
%==============================%
\item \textbf{Question \#4 : } \\


\benu 

\item nothing
\enu




%==============================%
% ======== PROBLEM #5 ======== %
%==============================%
\item \textbf{Question \#5 : Multipliers}
  
  \benu
\item nothing
  \enu



%==============================%
% ======== PROBLEM #6 ======== %
%==============================%
\item \textbf{Question \#6 : Hazards} \\
 
\benu

\item nothing
\enu
\enu
\end{document}
